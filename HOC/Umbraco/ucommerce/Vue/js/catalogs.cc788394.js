(function(e){function t(t){for(var i,o,a=t[0],c=t[1],l=t[2],u=0,h=[];u<a.length;u++)o=a[u],s[o]&&h.push(s[o][0]),s[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);d&&d(t);while(h.length)h.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,a=1;a<n.length;a++){var c=n[a];0!==s[c]&&(i=!1)}i&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var i={},s={catalogs:0},r=[];function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var d=c;r.push([1,"chunk-vendors"]),n()})({"03ad":function(e,t,n){"use strict";var i=n("8030"),s=n.n(i);s.a},"0682":function(e,t,n){},"0f23":function(e,t,n){"use strict";var i=n("3f2a"),s=n.n(i);s.a},1:function(e,t,n){e.exports=n("1d1a")},"1d1a":function(e,t,n){"use strict";n.r(t);n("cd13"),n("cadf"),n("551c"),n("f751"),n("097d");var i,s,r=n("15a6"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("router-view")},a=[],c=(n("f885"),n("43ad"),n("cebc")),l=(n("85aa"),n("3b8d")),d={Umbraco:{"--selection-color":"","--header-bg":"","--header-border":"","--header-color":""},Sitecore:{"--selection-color":"#de232f","--header-bg":"#de232f","--header-border":"none","--header-color":"#fff"},Kentico:{"--selection-color":"#d0e8ed","--header-bg":"#d6d9d6","--header-border":"none","--header-color":""},Sitefinity:{"--selection-color":"#e6f2f8","--header-bg":"#fff","--header-border":"none","--header-color":""}},u=n("7b6e"),h={name:"root-app",created:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("system/information");case 2:t=e.sent,this.applyCMSTheme(t.data.cms),this.setSystemInfo(t.data);case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:Object(c["a"])({},Object(u["d"])(["setSystemInfo"]),{applyCMSTheme:function(e){var t=document.documentElement,n=d[e];Object.keys(n).forEach(function(e){t.style.setProperty(e,n[e])})}})},g=h,f=n("2877"),p=Object(f["a"])(g,o,a,!1,null,null,null),m=p.exports,v=n("8054"),b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"catalogs",class:{dragging:e.dragging}},[e._m(0),n("section",{staticClass:"catalogs__builder-outer"},[n("cat-builder",{ref:"builder"}),n("div",{staticClass:"catalogs__builder-resize-outer"},[n("div",{staticClass:"catalogs__builder-resize-inner",on:{mousedown:e.onMousedown}})])],1),n("details-view",{on:{deleted:e.selectParent}})],1)},y=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"catalogs__header"},[n("h1",[e._v("Catalogs")])])}],w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("store-selector"),n("section",{ref:"builder",staticClass:"cat-builder",on:{click:e.setFocus,keydown:[e.keydownHandler,function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.hideCreate(t)}],keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"right",39,t.key,["Right","ArrowRight"])&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:t.ctrlKey&&t.altKey?"button"in t&&2!==t.button?null:"button"in t&&0!==t.button?null:e.moveCreateWidget(t):null}}},[n("div",{ref:"inner",staticClass:"cat-builder__inner",style:{transform:e.xPosition}},[n("div",{staticClass:"cat-builder__header"}),e._l(e.treeSections,function(t,i){return n("tree-section",{key:i,ref:"section",refInFor:!0,attrs:{section:t},on:{nodeSelected:e.nodeSelected,nodeDropped:e.nodeDropped,nodeCreated:e.nodeCreated,needsMoreCats:e.loadMoreCats}})})],2),n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.showScroll,expression:"showScroll"}],staticClass:"builder__scrollbar"},[n("div",{ref:"scroller",staticClass:"builder__scroll-handle",class:{scrolling:e.scrolling},style:{width:e.scrollerWidthPercent+"%",transform:"translate3d("+e.scrollerPosition+"px, 0, 0)"}})])])],1)],1)},C=[],_=(n("009d"),n("c875"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("uc-select",{staticClass:"store-selector",attrs:{label:"Stores",options:e.stores,selected:e.selectedStore,placeholder:"Select a store"},on:{selected:e.setSelectedStore}})}),x=[],S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"uc-select",class:{readonly:e.readonly}},[e.label?n("label",{staticClass:"uc-select__label input-label",attrs:{for:e.id}},[e._v(e._s(e.label))]):e._e(),n("div",{staticClass:"uc-select__selected",attrs:{id:e.id},on:{click:e.toggleOptions}},[e._v(e._s(e.selectedText))]),n("div",{staticClass:"uc-select__arrow",class:{toggled:e.optionsToggled},on:{click:e.toggleOptions}},[n("triangle")],1),n("transition",{attrs:{name:"dropdown"}},[n("ul",{directives:[{name:"show",rawName:"v-show",value:e.showOptions,expression:"showOptions"}],staticClass:"uc-select__options dropdown-overlay"},e._l(e.filteredOptions,function(t){return n("li",{key:t.value,staticClass:"uc-select__option",on:{click:function(n){return e.selectOption(t)}}},[e._v(e._s(t.text))])}),0)])],1)},I=[],O=(n("7514"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"}},[n("title",[e._v("triangle right")]),n("g",[n("path",{attrs:{d:"M14,7.999c0-0.326-0.159-0.632-0.427-0.819l-10-7C3.269-0.034,2.869-0.058,2.538,0.112 C2.207,0.285,2,0.626,2,0.999v14.001c0,0.373,0.207,0.715,0.538,0.887c0.331,0.17,0.73,0.146,1.035-0.068l10-7 C13.841,8.633,14,8.327,14,8.001C14,8,14,8,14,7.999C14,8,14,8,14,7.999z"}})])])}),T=[],D={},k=Object(f["a"])(D,O,T,!1,null,null,null),j=k.exports,N=(n("6b54"),function(){return"id"+Math.random().toString(36).slice(2,9)}),G={name:"uc-select",data:function(){return{id:0,optionsToggled:!1}},props:{options:Array,selected:String,label:String,placeholder:{Type:String,default:"Select an option"},readonly:Boolean},computed:{selectedOption:function(){var e=this;return this.options?this.options.find(function(t){return t.value===e.selected}):""},selectedText:function(){return this.selectedOption?this.selectedOption.text:this.placeholder},showOptions:function(){return this.optionsToggled&&!this.readonly&&this.options.length>0},filteredOptions:function(){var e=this;return this.options.filter(function(t){return t!==e.selectedOption})}},methods:{toggleOptions:function(e){var t=this;this.readonly||(e.preventDefault(),this.optionsToggled=!this.optionsToggled,this.optionsToggled&&window.setTimeout(function(){window.addEventListener("click",t.closeHandler)},10))},selectOption:function(e){this.readonly||(this.$emit("selected",e),this.optionsToggled=!1)},closeHandler:function(e){this.optionsToggled=!1,window.removeEventListener("click",this.closeHandler)}},components:{Triangle:j},created:function(){this.id=N()}},M=G,P=(n("a970"),Object(f["a"])(M,S,I,!1,null,null,null)),$=P.exports,E=(n("fb40"),function(e){return e.map(function(e){return{text:e.name,value:e.guid}})}),H=Object(u["a"])("builder"),L=H.mapGetters,W=H.mapMutations,R={name:"store-selector",components:{UcSelect:$},computed:Object(c["a"])({},L(["selectedStore","stores"])),methods:Object(c["a"])({},W(["setSelectedStore","setStores"]),{getStores:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/stores");case 2:if(t=e.sent,n=E(t.data),this.setStores(n),this.stores.length){e.next=7;break}return e.abrupt("return");case 7:this.setSelectedStore(this.stores[0]);case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}),created:function(){this.getStores()}},V=R,B=(n("b19a"),Object(f["a"])(V,_,x,!1,null,null,null)),Y=B.exports,A=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"section",staticClass:"cat-builder__section",style:{width:e.sectionWidth+"px",height:e.sectionHeight+"px"},on:{dragenter:e.sectionEnter,mouseenter:e.mouseenterHandler,mouseleave:e.mouseleaveHandler}},[n("header",{class:e.sectionClasses,on:{dragenter:e.headerDragenter,dragleave:e.headerDragleave,dragover:e.headerDragover,drop:function(t){return t.preventDefault(),t.stopPropagation(),e.headerDrop(t)}}},[n("span",[e._v(e._s(e.section.name))])]),n("div",{ref:"body",staticClass:"section__body",on:{dragover:e.bodyDragover,drop:e.bodyDrop,scroll:e.checkIfMoreItemsNeeded}},[e._l(e.section.categories,function(t,i){return[n("drop-target",{key:i,attrs:{targetIndex:i,sortOrder:t.sortOrder,visibleIndex:e.visibleTargetIndex,sectionGuid:e.section.guid},on:{dropped:e.targetDrop}}),n("tree-node",{key:t.guid,ref:"node",refInFor:!0,attrs:{cat:t,"parent-guid":e.section.guid,"cat-index":i},on:{selected:function(t){return e.$emit("nodeSelected",t)},nodeDropped:e.nodeDropped}})]}),n("drop-target",{attrs:{targetIndex:99999,sortOrder:0,visibleIndex:e.visibleTargetIndex,sectionGuid:e.section.guid},on:{dropped:e.bodyDrop}}),n("div",{ref:"remaining",staticClass:"section__remaining-items-placeholder",style:e.remainingItemsStyle})],2),n("transition",{attrs:{name:"fade"}},[n("create-node",{directives:[{name:"show",rawName:"v-show",value:e.showCreateTriggerComp,expression:"showCreateTriggerComp"}],ref:"creator",attrs:{nodeType:e.sectionNodeType,parentInfo:e.createPayload},on:{nodeCreated:function(t){return e.$emit("nodeCreated",t)}}})],1)],1)},z=[],U=n("bd86"),F="productCatalog",X="productCategory",K="store",J=(i={},Object(U["a"])(i,F,"catalogs"),Object(U["a"])(i,X,"categories"),Object(U["a"])(i,K,"stores"),i),q=(s={},Object(U["a"])(s,F,"catalog"),Object(U["a"])(s,X,"category"),s),Q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"node",staticClass:"cat-builder__node",class:e.classes,attrs:{tabindex:"0",id:e.cat.guid,draggable:"true"},on:{click:e.clickHandler,focus:e.select,dragstart:e.dragstartHandler,dragend:e.dragendHandler,dragenter:e.dragenterHandler,dragleave:e.dragleaveHandler,dragover:e.dragoverHandler,drop:function(t){return t.preventDefault(),t.stopPropagation(),e.dropHandler(t)}}},[n("span",[e._v(e._s(e.cat.name))]),n("right-arrow",{directives:[{name:"show",rawName:"v-show",value:e.cat.hasChildren,expression:"cat.hasChildren"}]})],1)},Z=[],ee=(n("3876"),Object(u["a"])("builder")),te=ee.mapGetters,ne=ee.mapMutations,ie={name:"tree-node",data:function(){return{hoverMsBeforeLoad:1e3,dragOverTimestamp:null,emitTypes:{selected:"selected",changeSection:"changeSection"},isDropzone:!1,dragClone:null}},props:{cat:Object,catIndex:Number,parentGuid:String},computed:Object(c["a"])({},te(["dragInfo","treeSections"]),{classes:function(){return{selected:this.cat.selected,displaying:this.cat.displaying,dragging:this.dragging,dropzone:this.isDropzone}},dragging:function(){return this.dragInfo.dragging&&this.dragInfo.node.guid===this.cat.guid},height:function(){return this.$el.clientHeight},canDrop:function(){return!!this.dragInfo.dragging&&(this.cat.guid!==this.dragInfo.node.guid&&(this.dragInfo.node.nodeType!==F&&this.dragInfo.node.guid!==this.parentGuid))}}),components:{RightArrow:j},methods:Object(c["a"])({},ne(["setDragInfo","endDrag"]),{clickHandler:function(e){e.stopPropagation(),this.setFocus()},setFocus:function(){this.$el.focus()},dragstartHandler:function(e){var t={dragging:!0,node:this.cat,catIndex:this.catIndex,parentGuid:this.parentGuid,currentSectionGuid:this.parentGuid};this.setDragInfo(t),this.dragClone=this.$el.cloneNode(!0),this.dragClone.classList.add("drag-clone"),this.dragClone.id="",document.body.appendChild(this.dragClone),e.dataTransfer.setData("text","anything"),e.dataTransfer.effectAllowed="move",e.dataTransfer.setDragImage(this.dragClone,e.offsetX,e.offsetY)},dragendHandler:function(){this.endDrag(),document.body.removeChild(this.dragClone),this.dragClone=null},dragenterHandler:function(e){this.canDrop&&(this.dragOverTimestamp=e.timeStamp,this.isDropzone=!0)},dragleaveHandler:function(){this.isDropzone=!1,this.dragOverTimestamp=null},dragoverHandler:function(e){this.cat.guid!==this.dragInfo.node.guid&&this.canDrop&&(e.preventDefault(),e.dataTransfer.dropEffect="move",window.performance.now()-this.dragOverTimestamp>this.hoverMsBeforeLoad&&(this.dragOverTimestamp=e.timeStamp,this.select()))},dropHandler:function(e){if(this.isDropzone=!1,this.canDrop){var t={parentGuid:this.cat.guid,sortOrder:null,newIndex:-1,catalogGuid:this.cat.nodeType===F?this.cat.guid:void 0};this.$emit("nodeDropped",t)}},emitDragEvent:function(e,t){this.lastDragEmit!==e&&(this.lastDragEmit=e,this.$emit(e,t))},select:function(){this.$emit(this.emitTypes.selected,{parentGuid:this.parentGuid,cat:this.cat})}})},se=ie,re=(n("7c69"),Object(f["a"])(se,Q,Z,!1,null,null,null)),oe=re.exports,ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"target"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"section__drop-target",on:{drop:function(t){return t.preventDefault(),t.stopPropagation(),e.drop(t)},dragover:function(t){return t.preventDefault(),e.dragover(t)}}})])},ce=[],le=Object(u["a"])("builder"),de=le.mapGetters,ue={name:"drop-target",props:{sortOrder:Number,targetIndex:Number,visibleIndex:Number,sectionGuid:String},computed:Object(c["a"])({},de(["dragInfo"]),{show:function(){return this.targetIndex===this.visibleIndex&&this.dragInfo.currentSectionGuid===this.sectionGuid}}),methods:{drop:function(){this.$emit("dropped",this.sortOrder)},dragover:function(e){e.dataTransfer.dropEffect="move"}}},he=ue,ge=(n("23fb"),Object(f["a"])(he,ae,ce,!1,null,null,null)),fe=ge.exports,pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"builder__create",class:{toggled:e.inputVisible},on:{click:function(e){e.stopPropagation()}}},[n("a",{directives:[{name:"show",rawName:"v-show",value:!e.inputVisible,expression:"!inputVisible"}],staticClass:"builder__create__link",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.showInput(t)}}},[e._v(e._s(e.addLabel))]),n("form",{directives:[{name:"show",rawName:"v-show",value:e.inputVisible,expression:"inputVisible"}],staticClass:"builder__create__form",on:{submit:function(t){return t.preventDefault(),e.createNewNode(t)}}},[n("uc-text",{ref:"input",attrs:{placeholder:e.placeholder,value:e.newName},on:{input:e.updateName}}),n("span",{directives:[{name:"show",rawName:"v-show",value:e.errorMessage.length,expression:"errorMessage.length"}],staticClass:"builder__create__error"},[e._v(e._s(e.errorMessage))]),n("div",[n("uc-button",{attrs:{text:"Add",type:"submit",primary:!0}}),n("uc-button",{staticClass:"builder__create__cancel",attrs:{text:"Cancel",primary:!1},on:{click:e.hideInput}})],1)],1)])},me=[],ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"uc-text-input"},[e.label?n("label",{staticClass:"uc-text-input__label input-label",attrs:{for:e.id}},[e._v(e._s(e.label))]):e._e(),n("input",{ref:"field",staticClass:"uc-text-input__input",attrs:{type:"text",id:e.id,disabled:e.readonly,placeholder:e.placeholder},domProps:{value:e.value},on:{input:e.emitValue}})])},be=[],ye={name:"uc-text-input",data:function(){return{id:null}},props:{label:String,placeholder:String,value:String,readonly:Boolean},methods:{emitValue:function(e){this.$emit("input",e.target.value)},focus:function(){this.$refs.field.focus()}},created:function(){this.id=N()}},we=ye,Ce=(n("3d4d"),Object(f["a"])(we,ve,be,!1,null,null,null)),_e=Ce.exports,xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"uc-button",class:{primary:e.primary},attrs:{type:e.type},on:{click:e.clicked}},[e._v(e._s(e.text))])},Se=[],Ie={name:"uc-button",props:{text:String,disabled:Boolean,primary:Boolean,type:String},methods:{clicked:function(e){this.$emit("click",e)}}},Oe=Ie,Te=(n("0f23"),Object(f["a"])(Oe,xe,Se,!1,null,null,null)),De=Te.exports,ke=Object(u["a"])("builder"),je=ke.mapGetters,Ne={name:"create-node",data:function(){return{inputVisible:!1,newName:"",errorMessage:""}},props:{nodeType:String,parentInfo:Object},components:{UcText:_e,UcButton:De},computed:Object(c["a"])({},je(["selectedStore"]),{addLabel:function(){return"Add new ".concat(q[this.nodeType]," (c)")},placeholder:function(){return"C".concat(q[this.nodeType].substr(1)," name")}}),methods:{showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick().then(function(){e.$refs.input.focus()})},hideInput:function(){this.inputVisible=!1,this.errorMessage=""},updateName:function(e){this.newName=e,this.errorMessage=""},createNewNode:function(){var e=this;if(this.newName.trim().length){var t=Object(c["a"])({},this.parentInfo,{sortOrder:0,name:this.newName});this.nodeType===F&&(t.storeGuid=this.selectedStore),this.axios.post("".concat(J[this.nodeType]),t).then(function(t){e.newName="",e.$emit("nodeCreated",{isCatalog:e.nodeType===F,parentGuid:e.parentInfo.parentGuid}),e.$refs.input.focus()}).catch(function(t){400===t.response.status&&(e.errorMessage=t.response.data.Message)})}}}},Ge=Ne,Me=(n("b420"),Object(f["a"])(Ge,pe,me,!1,null,null,null)),Pe=Me.exports,$e=Object(u["a"])("builder"),Ee=$e.mapGetters,He=$e.mapMutations,Le={name:"tree-section",data:function(){return{headerEnterTimer:null,showCreateTrigger:!1,visibleTargetIndex:-1}},props:{section:Object},computed:Object(c["a"])({},Ee(["sectionWidth","sectionHeight","dragInfo","selectedCatalog","displayedNodePosition"]),{remainingItemsStyle:function(){var e=this.section.categories.length&&this.section.categoriesCount&&!this.section.endOfList?35:0,t=e*(this.section.categoriesCount-this.section.categories.length);return{height:"".concat(t,"px")}},sectionClasses:function(){return{"no-drop":!this.canDrop}},canDrop:function(){return!!this.dragInfo.dragging&&this.dragInfo.node.guid!==this.section.guid},isSectionOfOrigin:function(){return this.dragInfo.parentGuid===this.section.guid},draggingCategoryIntoCatalogSection:function(){if(this.dragInfo.dragging)return 0===this.section.position&&this.dragInfo.node.nodeType===X},sectionNodeType:function(){return 0===this.section.position?F:X},createPayload:function(){var e={};return this.selectedCatalog?(this.sectionNodeType!==K&&(e.parentCategoryId=this.section.guid===this.selectedCatalog.guid?null:this.section.guid,e.productCatalogId=this.selectedCatalog.guid,e.parentGuid=this.section.guid),e):e},showCreateTriggerComp:function(){return this.showCreateTrigger&&!this.dragInfo.dragging},createVisible:function(){return this.$refs.creator.inputVisible}}),methods:Object(c["a"])({},He(["setDragSectionGuid"]),{showCreate:function(){this.createVisible||(this.showCreateTrigger=!0,this.$refs.creator.showInput())},hideCreate:function(){this.createVisible&&(this.$refs.creator.hideInput(),this.showCreateTrigger=!1)},mouseenterHandler:function(){this.showCreateTrigger=!0},mouseleaveHandler:function(){this.$refs.creator.inputVisible||(this.showCreateTrigger=!1,this.$refs.creator.hideInput(!1))},sectionEnter:function(){this.setDragSectionGuid(this.section.guid)},bodyDragover:function(e){if(this.canDrop)if(e.preventDefault(),e.dataTransfer.dropEffect="move",this.draggingCategoryIntoCatalogSection)this.updateVisibleTargetIndex(-1);else if(!e.target.classList.contains("section__drop-target"))if(e.target.classList.contains("section__body"))this.updateVisibleTargetIndex(99999);else if(e.target.id!==this.dragInfo.node.guid)if(e.offsetY<9||e.offsetY>26){var t=e.target.offsetTop+e.offsetY;this.updateVisibleTargetIndex(Math.round(t/35))}else this.updateVisibleTargetIndex(-1);else this.updateVisibleTargetIndex(-1)},updateVisibleTargetIndex:function(e){e!==this.visibleTargetIndex&&(this.visibleTargetIndex=e)},bodyDrop:function(e){if(this.canDrop&&!this.draggingCategoryIntoCatalogSection){e&&e.preventDefault();var t=this.section.categories.length,n=t?this.section.categories[t-1].sortOrder+1:0;this.dropNode(n,t)}},targetDrop:function(e){var t=this.visibleTargetIndex;this.isSectionOfOrigin&&this.dragInfo.catIndex<this.visibleTargetIndex&&(t=this.visibleTargetIndex-1),this.dropNode(e,t)},headerDragenter:function(e){var t=this;this.canDrop&&!this.draggingCategoryIntoCatalogSection&&(this.headerEnterTimer=window.setTimeout(function(){e.target.classList.add("can-drop"),t.updateVisibleTargetIndex(-1),t.headerEnterTimer=void 0},500))},headerDragleave:function(e){this.headerEnterTimer&&(window.clearTimeout(this.headerEnterTimer),this.headerEnterTimer=void 0),e.target.classList.remove("can-drop")},headerDragover:function(e){this.canDrop&&!this.draggingCategoryIntoCatalogSection&&(e.preventDefault(),e.dataTransfer.dropEffect="move")},headerDrop:function(){this.dropNode(null,-1)},dropNode:function(e,t){var n={parentGuid:this.section.guid,sortOrder:e,newIndex:t};this.nodeDropped(n)},nodeDropped:function(e){this.$emit("nodeDropped",e),this.updateVisibleTargetIndex(-1)},resetScroll:function(){this.$refs.body.scrollTop=0},getScrollPosition:function(){return this.$refs.body.scrollTop},setScrollPosition:function(e){this.$refs.body.scrollTop=e},checkIfMoreItemsNeeded:function(){var e=this.$refs.remaining,t=this.$refs.body;if(e&&t){var n=e.getBoundingClientRect().top,i=n<2*t.offsetHeight;i&&this.$emit("needsMoreCats",this.section)}}}),components:{TreeNode:oe,CreateNode:Pe,DropTarget:fe}},We=Le,Re=(n("b0c5"),Object(f["a"])(We,A,z,!1,null,null,null)),Ve=Re.exports,Be=(n("a2eb"),function(e){var t=e.map(function(e){return e.selected=!1,e.displaying=!1,e});return t.sort(function(e,t){return e.sortOrder-t.sortOrder})}),Ye=Object(u["a"])("builder"),Ae=Ye.mapGetters,ze=Ye.mapMutations,Ue={name:"catalog-builder",data:function(){return{builderWidth:0,visibleSections:0,slidePosition:0,sectionClicked:0,scrolling:!1,scrollInit:{mouseX:0,scrollerPos:0,slidePos:0},scrollMove:0,isLoadingMoreItems:!1}},computed:Object(c["a"])({},Ae(["treeSections","displayedNodePosition","sectionWidth","displayedNode","dragInfo","selectedStore"]),{xPosition:function(){return"translate3d(-".concat(this.slidePosition*this.sectionWidth,"px, 0, 0)")},sectionsInTree:function(){return this.treeSections.length},showScroll:function(){return this.sectionsInTree*this.sectionWidth>this.builderWidth+50},scrollerWidthPercent:function(){return this.builderWidth/(this.sectionsInTree*this.sectionWidth)*100},scrollerWhiteSpace:function(){return this.builderWidth-this.scrollerWidthPercent*this.builderWidth/100},scrollerPageSize:function(){return this.scrollerWhiteSpace/(this.sectionsInTree-this.visibleSections)},scrollerPosition:function(){if(!this.scrolling){var e=this.scrollerPageSize*this.slidePosition;return e}return this.scrollMove}}),watch:{selectedStore:function(){this.getCatalogs()}},methods:Object(c["a"])({},ze(["setSectionWidth","setSectionsInTree","addItemsToSectionInTree","selectNode","resetDisplayedNode","setRecentDrop","moveDraggedNode"]),{loadMoreCats:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t.endOfList){e.next=2;break}return e.abrupt("return");case 2:if(!this.isLoadingMoreItems){e.next=4;break}return e.abrupt("return");case 4:if(this.isLoadingMoreItems=!0,e.prev=5,0!==t.position){e.next=11;break}return e.next=9,this.getMoreCatalogs(t);case 9:e.next=13;break;case 11:return e.next=13,this.getMoreCategories(t);case 13:return e.prev=13,this.isLoadingMoreItems=!1,e.finish(13);case 16:n=this.$refs.section[t.position],n&&n.checkIfMoreItemsNeeded.bind(n)();case 18:case"end":return e.stop()}},e,this,[[5,,13,16]])}));function t(t){return e.apply(this,arguments)}return t}(),getCatalogs:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t,n,i,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=25,e.next=3,this.axios.get("/stores/".concat(this.selectedStore,"/catalogs?limit=").concat(t));case 3:n=e.sent,i=Be(n.data),s={position:0,cat:{name:"Catalogs",nodeType:"store",guid:this.selectedStore},elements:i,categoriesCount:+n.headers["x-total-count"]},this.setSectionsInTree(s),i.length?this.selectNodeWithPosition(0,0):this.resetDisplayedNode(),this.resetScroll(1);case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getMoreCatalogs:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t,n){var i,s,r,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=100,n=n||t.categories[t.categories.length-1].guid,e.next=4,this.axios.get("/stores/".concat(this.selectedStore,"/catalogs?limit=").concat(i,"&marker=").concat(n));case 4:s=e.sent,r=Be(s.data),o={position:0,cat:t,elements:r,categoriesCount:+s.headers["x-total-count"]},this.addItemsToSectionInTree(o);case 8:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}(),selectParent:function(){var e=this;if(this.displayedNode.nodeType!==F){var t=this.displayedNodePosition.section-1,n=this.treeSections[t].categories.findIndex(function(e){return e.selected});this.selectNodeWithPosition(t,n)}else this.getCatalogs().then(function(t){t.length&&e.selectNodeWithPosition(0,0)})},setWidth:function(){this.builderWidth=this.$refs.builder.offsetWidth,this.visibleSections=Math.round(this.builderWidth/300),this.setSectionWidth(Math.ceil(this.builderWidth/this.visibleSections))},nodeSelected:function(e){var t=e.cat,n=e.parentGuid,i=this.treeSections.findIndex(function(e){return e.guid===n});this.selectNode({parentGuid:n,catGuid:t.guid}),this.getCategories(t,i),this.sectionClicked=i},nodeDropped:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t){var n,i,s,r,o,a,c,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=this.treeSections[0].categories.find(function(e){return e.selected}),i=t.catalogGuid||n.guid,s=this.dragInfo.node.guid,r=this.dragInfo.parentGuid===t.parentGuid,o=t.parentGuid===t.catalogGuid?0:this.treeSections.findIndex(function(e){return e.guid===t.parentGuid}),a=this.getSectionScrollPosition(o),c={sortOrder:t.sortOrder,parentCategoryGuid:t.parentGuid===i?null:t.parentGuid,productCatalogGuid:i},e.next=9,this.axios.patch("".concat(J[this.dragInfo.node.nodeType],"/").concat(this.dragInfo.node.guid),c);case 9:if(this.moveDraggedNode(t),t.parentGuid!==t.catalogGuid){e.next=13;break}return e.next=13,this.getCatalogs();case 13:l=r?s:t.parentGuid,this.selectNodeWithGuid(l),this.setFocus(),this.setSectionScrollPosition(o,a);case 17:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),getSectionScrollPosition:function(e){return this.$refs.section[e]?this.$refs.section[e].getScrollPosition():0},setSectionScrollPosition:function(e,t){if(this.$refs.section[e])return this.$refs.section[e].setScrollPosition(t)},getCategories:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t,n){var i,s,r,o,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=J[t.nodeType],s=25,e.next=4,this.axios.get("/".concat(i,"/").concat(t.guid,"/categories?limit=").concat(s));case 4:r=e.sent,o=Be(r.data),a={position:n+1,elements:o,cat:t,categoriesCount:+r.headers["x-total-count"]},this.setSectionsInTree(a),this.setWidth(),this.slideSections(),this.resetScroll(n+1);case 11:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}(),getMoreCategories:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t,n){var i,s,r,o,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=J[t.nodeType],n=n||t.categories[t.categories.length-1].guid,s=100,e.next=5,this.axios.get("/".concat(i,"/").concat(t.guid,"/categories?limit=").concat(s,"&marker=").concat(n));case 5:r=e.sent,o=Be(r.data),a={position:t.position,elements:o,cat:t,categoriesCount:+r.headers["x-total-count"]},this.addItemsToSectionInTree(a),this.setWidth(),this.slideSections();case 11:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}(),resetScroll:function(e){var t=this.$refs.section;t&&t.length>e&&t[e].resetScroll()},setFocus:function(e){var t=this;this.$nextTick(function(){if(!e||!e.target.classList.contains("cat-builder__node")){var n=document.getElementById(t.displayedNode.guid);n&&n.focus()}})},slideSections:function(){var e=this.slidePosition+this.visibleSections-1;this.sectionClicked===e&&this.sectionsInTree>e+1?this.slidePosition+=1:this.slidePosition=Math.max(this.sectionsInTree-this.visibleSections,0)},selectNodeWithPosition:function(e,t){var n=Math.min(Math.max(e,0),this.sectionsInTree-1),i=this.treeSections[n],s=Math.min(Math.max(t,0),i.categories.length-1);this.nodeSelected({cat:i.categories[s],parentGuid:i.guid}),this.setFocus()},selectNodeWithGuid:function(e){e:for(var t=0;t<this.treeSections.length;t++)for(var n=this.treeSections[t],i=0;i<n.categories.length;i++){var s=n.categories[i];if(s.guid===e){this.nodeSelected({cat:s,parentGuid:n.guid});break e}}},setupScrollHandler:function(){var e=this;this.$refs.scroller.addEventListener("mousedown",function(t){e.scrollInit.scrollerPos=e.scrollerPosition,e.scrollInit.mouseX=t.clientX,e.scrollInit.slidePos=e.slidePosition,e.scrollMove=e.scrollerPosition,e.scrolling=!0,window.addEventListener("mousemove",e.scrollMoveHandler)}),window.addEventListener("mouseup",function(t){e.scrolling=!1,window.removeEventListener("mousemove",e.scrollMoveHandler),window.onmousemove=null})},scrollMoveHandler:function(e){e.preventDefault();var t=e.clientX-this.scrollInit.mouseX;this.scrollMove=Math.min(Math.max(t+this.scrollInit.scrollerPos,0),this.scrollerWhiteSpace);var n=Math.round((this.scrollMove-this.scrollInit.scrollerPos)/this.scrollerPageSize);this.slidePosition=this.scrollInit.slidePos+n},keydownHandler:function(e){var t=this.displayedNodePosition.section,n=this.displayedNodePosition.index,i=this.$refs.section.findIndex(function(e){return e.createVisible});switch(e.key){case"ArrowLeft":if(0===t)break;t-=1,n=this.treeSections[t].categories.findIndex(function(e){return e.selected});break;case"ArrowUp":n-=1;break;case"ArrowRight":this.treeSections[t+1].categories.length&&(t+=1);break;case"ArrowDown":n+=1;break;case"c":if(i>-1)return;this.showCreateInSection(t);break;default:return}e.preventDefault(),this.selectNodeWithPosition(t,n)},moveCreateWidget:function(e){var t=this.$refs.section.findIndex(function(e){return e.createVisible});if(-1!==t&&("ArrowLeft"===e.key&&this.showCreateInSection(Math.max(t-1,0)),"ArrowRight"===e.key)){var n=this.treeSections.length-1;this.showCreateInSection(Math.min(t+1,n))}},hideCreate:function(e){for(var t=0;t<this.$refs.section.length;t++)t!==e&&this.$refs.section[t].hideCreate();this.setFocus()},showCreateInSection:function(e){this.hideCreate(e),this.$refs.section[e].showCreate()},nodeCreated:function(e){var t=e.parentGuid,n=e.isCatalog;n?this.getCatalogs():this.selectNodeWithGuid(t)}}),components:{StoreSelector:Y,TreeSection:Ve},mounted:function(){var e=this;this.setWidth(),window.addEventListener("resize",function(){e.setWidth(),e.slideSections()}),this.setupScrollHandler()}},Fe=Ue,Xe=(n("03ad"),Object(f["a"])(Fe,w,C,!1,null,null,null)),Ke=Xe.exports,Je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.details?n("section",{staticClass:"details-view"},[n("header",{staticClass:"details-view__header"},[n("div",[n("span",{staticClass:"details__type-label"},[e._v(e._s(e.detailsTypeSingular))]),n("h2",[e._v(e._s(e.details.name))])]),n("div",{staticClass:"details-view__header-right"},[n("uc-select-simple",{attrs:{options:e.languages,selected:e.displayedCulture},on:{selected:e.changeLanguage}}),n("info-widget",[n("label",{staticClass:"input-label"},[e._v("Created")]),n("span",[e._v(e._s(e.details.createdBy))]),n("br"),n("span",[e._v(e._s(e._f("format")(e.details.createdOn,"DD. MMM YYYY",e.locale)))]),n("label",{staticClass:"input-label"},[e._v("Modified")]),n("span",[e._v(e._s(e.details.modifiedBy))]),n("br"),n("span",[e._v(e._s(e._f("format")(e.details.modifiedOn,"DD. MMM YYYY",e.locale)))])]),n("div",{staticClass:"details-view__delete",class:{confirmToggled:e.confirmToggled}},[n("span",{on:{click:e.toggleConfirm}},[e._v("Delete")]),n("transition",{attrs:{name:"popover-right"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.confirmToggled,expression:"confirmToggled"}],staticClass:"dropdown-overlay details__delete-overlay"},[n("button",{staticClass:"btn danger details__delete-btn",on:{click:e.deleteItem}},[e._v("Yes, delete this")]),n("button",{staticClass:"btn",on:{click:e.toggleConfirm}},[e._v("Cancel")])])])],1)],1)]),n(e.displayedNode.nodeType,{tag:"component",attrs:{language:e.displayedCulture}})],1):e._e()},qe=[],Qe=(n("029e"),n("768b")),Ze=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"details-catalog"},[n("section",{staticClass:"details__static"},[n("uc-text-input",{attrs:{value:e.details.displayName,label:"Display name ("+e.language+")",readonly:!0}}),n("uc-text-input",{attrs:{value:e.details.name,label:"Internal name",readonly:!0}}),n("uc-checkbox",{attrs:{label:"Show on website",checked:e.details.displayOnWebsite,readonly:!0}}),n("uc-checkbox",{attrs:{label:"Show prices with VAT",checked:e.details.showPricesIncludingVAT,readonly:!0}}),n("uc-select",{attrs:{label:"Default price group",options:e.priceGroups,selected:e.detailsDefaultPriceGroup.guid,readonly:!0}}),n("uc-select",{attrs:{label:"Catalog definition",options:e.catalogDefinitions,selected:e.detailsDefinition.guid,readonly:!0}}),n("div",[n("label",{staticClass:"input-label"},[e._v("Allowed price groups")]),n("div",{staticClass:"details-catalog__pricegroups"},e._l(e.priceGroupCheckboxes,function(e){return n("div",{key:e.value,staticClass:"details-catalog__pricegroup-check"},[n("uc-checkbox",{attrs:{label:e.text,checked:e.checked,value:e.value,readonly:!0}})],1)}),0)])],1)])},et=[],tt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"uc-checkbox",class:{readonly:e.readonly}},[n("input",{attrs:{type:"checkbox",name:e.id,id:e.id,disabled:e.readonly},domProps:{checked:e.checked},on:{change:e.onChange}}),n("span",{staticClass:"uc-checkbox__label"},[e._v(e._s(e.label))]),n("div",{staticClass:"uc-checkbox__check"},[n("check")],1)])},nt=[],it=n("f0d6"),st={name:"uc-checkbox",data:function(){return{id:null}},props:{label:String,readonly:Boolean,checked:Boolean,value:String},components:{Check:it["a"]},methods:{onChange:function(e){this.$emit("change",{checked:e.target.checked,value:this.value})}},created:function(){this.id=N()}},rt=st,ot=(n("f146"),Object(f["a"])(rt,tt,nt,!1,null,null,null)),at=ot.exports,ct=Object(u["a"])("details"),lt=ct.mapGetters,dt={name:"catalog-details",props:{language:String},computed:Object(c["a"])({},lt(["details","priceGroups","catalogDefinitions"]),Object(u["c"])(["systemInfo"]),{priceGroupCheckboxes:function(){var e=this;return this.priceGroups.map(function(t){return Object(c["a"])({},t,{checked:!~e.details.allowedPriceGroups.findIndex(function(e){return e.guid===t.guid})})})},detailsDefinition:function(){return this.details.definition||{}},detailsDefaultPriceGroup:function(){return this.details.defaultPriceGroup||{}}}),components:{UcTextInput:_e,UcCheckbox:at,UcSelect:$}},ut=dt,ht=(n("3708"),Object(f["a"])(ut,Ze,et,!1,null,null,null)),gt=ht.exports,ft=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"details-category"},[n("section",{staticClass:"details-category__static"},[n("div",[n("uc-image",{attrs:{src:e.details.mediaURL,width:"250px",readonly:!0}})],1),n("div",{staticClass:"details-category__static-right"},[n("uc-text-input",{attrs:{value:e.details.displayName,label:"Display name ("+e.language+")",readonly:!0}}),n("uc-text-input",{attrs:{value:e.details.name,label:"Internal name",readonly:!0}}),n("uc-rich-text",{attrs:{value:e.details.description,label:"Description ("+e.language+")",readonly:!0}}),n("uc-checkbox",{attrs:{label:"Show on website",checked:e.details.displayOnWebsite,readonly:!0}}),n("uc-select",{attrs:{label:"Catalog definition",options:e.categoryDefinitions,selected:e.detailsDefinition.guid,readonly:!0}})],1)])])},pt=[],mt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"uc-rich-text"},[e.label?n("label",{staticClass:"input-label"},[e._v(e._s(e.label))]):e._e(),n("div",{ref:"editor"})])},vt=[],bt=n("9339"),yt=n.n(bt),wt={name:"uc-rich-text",data:function(){return{editor:null}},props:{value:{type:String,default:""},theme:{type:String,default:"snow"},readonly:Boolean,placeholder:{type:String,default:"Enter text..."},label:String},mounted:function(){var e=this;this.editor=new yt.a(this.$refs.editor,{theme:this.theme,readOnly:this.readonly,placeholder:this.placeholder}),this.editor.root.innerHTML=this.value,this.editor.on("text-change",function(){return e.update()})},methods:{update:function(){this.$emit("input",this.editor.getText()?this.editor.root.innerHTML:"")}}},Ct=wt,_t=(n("cef3"),Object(f["a"])(Ct,mt,vt,!1,null,null,null)),xt=_t.exports,St=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"uc-image",class:{cover:e.cover,readonly:e.readonly},style:{width:e.width,height:e.height},on:{click:e.clickHandler}},[e.fallback?e._e():n("img",{class:{cover:e.cover},attrs:{src:e.src,alt:e.alt},on:{error:e.showDefault}}),e.fallback?n("camera-icon"):e._e()],1)},It=[],Ot=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"}},[n("title",[e._v("camera ban 37")]),n("g",[n("path",{attrs:{d:"M7,52h0.758l13.913-13.913C20.616,36.301,20,34.225,20,32c0-6.627,5.373-12,12-12 c2.225,0,4.301,0.616,6.087,1.671L45.5,14l-5.7-7.6C39.611,6.148,39.314,6,39,6H25c-0.314,0-0.611,0.148-0.8,0.4L18.5,14H7 c-2.206,0-4,1.794-4,4v30C3,50.206,4.794,52,7,52z"}}),n("path",{attrs:{fill:"#000000",d:"M57,14h-2.758L42.329,25.913C43.384,27.699,44,29.775,44,32c0,6.627-5.373,12-12,12 c-2.225,0-4.301-0.616-6.087-1.671L16.242,52H57c2.206,0,4-1.794,4-4V18C61,15.794,59.206,14,57,14z"}}),n("path",{attrs:{d:"M3,62c-0.256,0-0.512-0.098-0.707-0.293c-0.391-0.391-0.391-1.023,0-1.414l58-58 c0.391-0.391,1.023-0.391,1.414,0s0.391,1.023,0,1.414l-58,58C3.512,61.902,3.256,62,3,62z"}})])])},Tt=[],Dt={},kt=Object(f["a"])(Dt,Ot,Tt,!1,null,null,null),jt=kt.exports,Nt={name:"uc-image",data:function(){return{fallback:!1}},props:{src:String,alt:String,cover:Boolean,width:{type:String,default:"auto"},height:{type:String,default:"auto"},readonly:Boolean},components:{CameraIcon:jt},methods:{showDefault:function(){this.fallback=!0},clickHandler:function(){this.$emit("click")}}},Gt=Nt,Mt=(n("798d"),Object(f["a"])(Gt,St,It,!1,null,null,null)),Pt=Mt.exports,$t=Object(u["a"])("details"),Et=$t.mapGetters,Ht={name:"category-details",props:{language:String},computed:Object(c["a"])({},Et(["details","priceGroups","categoryDefinitions"]),Object(u["c"])(["systemInfo"]),{detailsDefinition:function(){return this.details.definition||{}}}),components:{UcTextInput:_e,UcCheckbox:at,UcSelect:$,UcImage:Pt,UcRichText:xt}},Lt=Ht,Wt=(n("525a"),Object(f["a"])(Lt,ft,pt,!1,null,null,null)),Rt=Wt.exports,Vt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"details__info"},[n("div",{staticClass:"details__info-wrapper",class:{toggled:e.toggled},on:{click:e.toggleInfo}},[n("div",{staticClass:"details__info-icon"},[e._v("i")]),n("span",{staticClass:"details__header-label"},[e._v("Info")])]),n("transition",{attrs:{name:"popover-right"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.toggled,expression:"toggled"}],staticClass:"dropdown-overlay details__info-dropdown"},[e._t("default")],2)])],1)},Bt=[],Yt={name:"info",data:function(){return{toggled:!1}},methods:{toggleInfo:function(e){var t=this;e.preventDefault(),this.toggled=!this.toggled,this.toggled&&window.setTimeout(function(){window.addEventListener("click",t.closeHandler)},10)},closeHandler:function(e){this.toggled=!1,window.removeEventListener("click",this.closeHandler)}}},At=Yt,zt=(n("a4f4"),Object(f["a"])(At,Vt,Bt,!1,null,null,null)),Ut=zt.exports,Ft=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"uc-select-simple",class:{readonly:e.readonly}},[n("div",{staticClass:"uc-select-simple__selected",on:{click:e.toggleOptions}},[e._v(e._s(e.selectedText))]),n("div",{staticClass:"uc-select-simple__arrow",class:{toggled:e.optionsToggled},on:{click:e.toggleOptions}},[n("triangle")],1),n("transition",{attrs:{name:"dropdown"}},[n("ul",{directives:[{name:"show",rawName:"v-show",value:e.showOptions,expression:"showOptions"}],staticClass:"uc-select-simple__options dropdown-overlay"},e._l(e.filteredOptions,function(t){return n("li",{key:t.value,staticClass:"uc-select-simple__option",on:{click:function(n){return e.selectOption(t)}}},[e._v(e._s(t.text))])}),0)])],1)},Xt=[],Kt={name:"uc-select-simple",data:function(){return{optionsToggled:!1}},props:{options:{type:Array},selected:String,placeholder:{Type:String,default:"Select an option"},readonly:Boolean},computed:{selectedOption:function(){var e=this;return this.options.find(function(t){return t.value===e.selected})},selectedText:function(){return this.selectedOption?this.selectedOption.text:this.placeholder},showOptions:function(){return this.optionsToggled&&!this.readonly&&this.options.length>0},filteredOptions:function(){var e=this;return this.options.filter(function(t){return t!==e.selectedOption})}},methods:{toggleOptions:function(e){var t=this;this.readonly||(e.preventDefault(),this.optionsToggled=!this.optionsToggled,this.optionsToggled&&window.setTimeout(function(){window.addEventListener("click",t.closeHandler)},10))},selectOption:function(e){this.readonly||(this.$emit("selected",e.value),this.optionsToggled=!1)},closeHandler:function(e){this.optionsToggled=!1,window.removeEventListener("click",this.closeHandler)}},components:{Triangle:j}},Jt=Kt,qt=(n("1e86"),Object(f["a"])(Jt,Ft,Xt,!1,null,null,null)),Qt=qt.exports,Zt=Object(u["a"])("details"),en=Object(u["a"])("builder"),tn={name:"details-section",data:function(){return{loadDetailsLocked:!1,bufferedDetailsGuid:null,currentDetailsGuid:null,typeNameMap:{productCategory:"Category",productCatalog:"Catalog"},selectedCulture:null,confirmToggled:!1}},computed:Object(c["a"])({},Zt.mapGetters(["details"]),en.mapGetters(["displayedNode","dragInfo"]),Object(u["c"])(["systemInfo","languages","locale"]),{detailsTypeSingular:function(){return this.typeNameMap[this.displayedNode.nodeType]},displayedCulture:function(){return this.selectedCulture?this.selectedCulture:this.systemInfo.currentCultureCode}}),watch:{displayedNode:function(){this.dragInfo.dragging||(this.displayedNode.guid?(this.bufferedDetailsGuid=this.displayedNode.guid,this.getDetails()):this.setDetails(void 0))}},components:{productCatalog:gt,productCategory:Rt,UcSelectSimple:Qt,InfoWidget:Ut},methods:Object(c["a"])({},Zt.mapMutations(["setDetails","setCatalogDefinitions","setCategoryDefinitions","setPriceGroups"]),{getDetailsBase:function(){return this.axios.get("".concat(J[this.displayedNode.nodeType],"/details/").concat(this.displayedNode.guid,"/").concat(this.displayedCulture))},getPriceGroups:function(){return"productCategory"===this.displayedNode.nodeType?new Promise(function(e){e({data:[]})}):this.axios.get("catalogs/pricegroups/".concat(this.displayedNode.guid))},getDetails:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t,n,i,s,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.loadDetailsLocked){e.next=11;break}return this.loadDetailsLocked=!0,this.currentDetailsGuid=this.displayedNode.guid,t=[this.getDetailsBase(),this.getPriceGroups()],e.next=6,Promise.all(t);case 6:n=e.sent,i=Object(Qe["a"])(n,2),s=i[0],r=i[1],this.populateDetails(s,r);case 11:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),populateDetails:function(e,t){this.loadDetailsLocked=!1,this.currentDetailsGuid===this.bufferedDetailsGuid?(this.setDetails(e.data),this.setPriceGroups(t.data)):this.getDetails()},toggleConfirm:function(e){var t=this;e.preventDefault(),this.confirmToggled=!this.confirmToggled,this.confirmToggled&&window.setTimeout(function(){window.addEventListener("click",t.closeHandler)},10)},deleteItem:function(){var e=this;this.confirmToggled=!1,this.axios.delete("".concat(J[this.displayedNode.nodeType],"/").concat(this.displayedNode.guid)).then(function(){e.$emit("deleted")})},closeHandler:function(){window.removeEventListener("click",this.closeHandler),this.confirmToggled=!1},changeLanguage:function(e){this.bufferedDetailsGuid=this.displayedNode.guid,this.selectedCulture=e,this.getDetails()}}),created:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("".concat(J[F],"/definitions"));case 2:return t=e.sent,e.next=5,this.axios.get("".concat(J[X],"/definitions"));case 5:n=e.sent,this.setCatalogDefinitions(t.data),this.setCategoryDefinitions(n.data);case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},nn=tn,sn=(n("d20d"),Object(f["a"])(nn,Je,qe,!1,null,null,null)),rn=sn.exports,on=Object(u["a"])("builder"),an={name:"catalogs",data:function(){return{startY:null,dragging:!1,minHeight:300}},components:{CatBuilder:Ke,DetailsView:rn},computed:Object(c["a"])({},on.mapGetters(["sectionHeight"])),methods:Object(c["a"])({},on.mapMutations(["setSectionHeight"]),{onMousedown:function(e){e.preventDefault(),this.startY=e.clientY,this.dragging=!0,window.addEventListener("mousemove",this.onMousemove)},onMousemove:function(e){var t=e.clientY-this.startY;this.startY=e.clientY,this.sectionHeight<this.minHeight&&t<0||this.setSectionHeight(this.sectionHeight+t)},onMouseup:function(){this.dragging=!1,window.removeEventListener("mousemove",this.onMousemove),window.onmousemove=null},selectParent:function(){this.$refs.builder.selectParent()}}),mounted:function(){window.addEventListener("mouseup",this.onMouseup)}},cn=an,ln=(n("fc08"),Object(f["a"])(cn,b,y,!1,null,null,null)),dn=ln.exports;r["a"].use(v["a"]);var un,hn,gn=new v["a"]({routes:[{path:"/",name:"catalogs",component:dn}]}),fn={},pn=fn,mn="setSystemInfo",vn=Object(U["a"])({},mn,function(e,t){e.systemInfo=t}),bn=vn,yn={systemInfo:function(e){return e.systemInfo},languages:function(e){return 0===e.systemInfo.languages.length?e.systemInfo.languages:e.systemInfo.languages.map(function(e){return{text:e.name,value:e.cultureCode}})},locale:function(e){return e.systemInfo.currentCultureCode?e.systemInfo.currentCultureCode.substr(0,2):"en"}},wn=yn,Cn="setSectionsInTree",_n="selectNode",xn="resetDisplayedNode",Sn="setSectionWidth",In="setSectionHeight",On="setDragInfo",Tn="endDrag",Dn="setDragSectionGuid",kn="moveDraggedNode",jn="setSelectedStore",Nn="setStores",Gn="addItemsToSectionInTree",Mn={},Pn=Mn,$n=n("75fc"),En=(un={},Object(U["a"])(un,Cn,function(e,t){var n=t.position,i=t.cat,s=t.elements,r=t.categoriesCount;n<0&&(e.treeSections=[]);var o=Object(c["a"])({categories:s,position:n,endOfList:s.length>=r||0===s.length,categoriesCount:r},i);e.displayedNode.hasChildren=o.categories.length>0,n!==e.treeSections.length?(e.treeSections[n]=o,e.treeSections=e.treeSections.slice(0,n+1)):e.treeSections.push(o)}),Object(U["a"])(un,Gn,function(e,t){var n=t.cat,i=t.elements,s=t.categoriesCount;n.categoriesCount=s,n.categories=[].concat(Object($n["a"])(n.categories),Object($n["a"])(i)),n.endOfList=n.categories>=s||0===i.length}),Object(U["a"])(un,_n,function(e,t){var n=t.parentGuid,i=t.catGuid,s=n?e.treeSections.find(function(e){return e.guid===n}):e.treeSections[0];s.categories.forEach(function(t){t.guid===i?(t.selected=!0,t.displaying=!0,e.displayedNode!==t&&(e.displayedNode.displaying=!1),e.displayedNode=t):t.selected=!1})}),Object(U["a"])(un,xn,function(e){e.displayedNode={}}),Object(U["a"])(un,Sn,function(e,t){e.sectionWidth=t}),Object(U["a"])(un,In,function(e,t){e.sectionHeight=t}),Object(U["a"])(un,On,function(e,t){e.dragInfo=t}),Object(U["a"])(un,Dn,function(e,t){e.dragInfo.currentSectionGuid=t}),Object(U["a"])(un,Tn,function(e){e.dragInfo.dragging=!1}),Object(U["a"])(un,kn,function(e,t){var n=t.parentGuid,i=t.newIndex,s=e.treeSections.find(function(t){return t.guid===e.dragInfo.parentGuid}),r=e.treeSections.find(function(e){return e.guid===n});(r||s)&&(r?s?-1===i?r.categories.push(s.categories.splice(e.dragInfo.catIndex,1)[0]):r.categories.splice(i,0,s.categories.splice(e.dragInfo.catIndex,1)[0]):-1===i?r.categories.push(e.dragInfo.node):r.categories.splice(i,0,e.dragInfo.node):s.categories.splice(e.dragInfo.catIndex,1))}),Object(U["a"])(un,jn,function(e,t){e.selectedStore=t.value}),Object(U["a"])(un,Nn,function(e,t){e.stores=t}),un),Hn=En,Ln={treeSections:function(e){return e.treeSections},sectionWidth:function(e){return e.sectionWidth},sectionHeight:function(e){return e.sectionHeight},dragInfo:function(e){return e.dragInfo},displayedNode:function(e){return e.displayedNode},displayedNodePosition:function(e){var t={section:0,index:0},n=e.treeSections.length;while(n--){var i=e.treeSections[n].categories.findIndex(function(e){return e.displaying});if(i>-1)return t.section=n,t.index=i,t}return t},selectedCatalog:function(e){return e.treeSections[0]?e.treeSections[0].categories.find(function(e){return e.selected}):{}},selectedStore:function(e){return e.selectedStore},stores:function(e){return e.stores}},Wn=Ln,Rn={state:{treeSections:[],sectionWidth:280,sectionHeight:320,displayedNode:{},dragInfo:{node:null,parent:null,index:NaN,initPosition:{},dragging:!1},stores:[],selectedStore:null},getters:Wn,mutations:Hn,actions:Pn,strict:!1},Vn={},Bn=Vn,Yn="setDetails",An="setCatalogDefinitions",zn="setCategoryDefinitions",Un="setPriceGroups",Fn=(hn={},Object(U["a"])(hn,Yn,function(e,t){e.details=t}),Object(U["a"])(hn,An,function(e,t){e.catalogDefinitions=t}),Object(U["a"])(hn,zn,function(e,t){e.categoryDefinitions=t}),Object(U["a"])(hn,Un,function(e,t){e.priceGroups=t}),hn),Xn=Fn,Kn={details:function(e){return e.details},categoryDefinitions:function(e){return e.categoryDefinitions.map(function(e){return{text:e.name,value:e.guid}})},catalogDefinitions:function(e){return e.catalogDefinitions.map(function(e){return{text:e.name,value:e.guid}})},priceGroups:function(e){return e.priceGroups.map(function(e){return{text:e.name,value:e.guid}})}},Jn=Kn,qn={state:{details:{},catalogDefinitions:[],categoryDefinitions:[],priceGroups:[]},getters:Jn,mutations:Xn,actions:Bn,strict:!1};r["a"].use(u["b"]);var Qn=new u["b"].Store({state:{systemInfo:{languages:[]}},getters:wn,mutations:bn,actions:pn,modules:{builder:Object(c["a"])({namespaced:!0},Rn),details:Object(c["a"])({namespaced:!0},qn)},strict:!1}),Zn=n("74d6"),ei=n.n(Zn),ti=n("30b2");r["a"].config.productionTip=!1;var ni=ei.a.create({baseURL:"/ucommerceapi/"});r["a"].prototype.axios=ni,r["a"].filter("format",function(e,t,n){return e?(e=e.toString(),Object(ti["a"])(e,t,ti["b"][n])):""}),new r["a"]({router:gn,store:Qn,render:function(e){return e(m)}}).$mount("#app")},"1e86":function(e,t,n){"use strict";var i=n("e272"),s=n.n(i);s.a},"23fb":function(e,t,n){"use strict";var i=n("509e"),s=n.n(i);s.a},"24d2":function(e,t,n){},"30b2":function(e,t,n){"use strict";n.d(t,"b",function(){return r});var i=n("70f2"),s=n.n(i);n.d(t,"a",function(){return s.a});var r={en:n("52cf"),da:n("eeea"),sv:n("8718"),de:n("6e0c")}},3308:function(e,t,n){},3708:function(e,t,n){"use strict";var i=n("3308"),s=n.n(i);s.a},"3d4d":function(e,t,n){"use strict";var i=n("a645"),s=n.n(i);s.a},"3f2a":function(e,t,n){},4962:function(e,t,n){},"509e":function(e,t,n){},"525a":function(e,t,n){"use strict";var i=n("88ec"),s=n.n(i);s.a},6911:function(e,t,n){},"798d":function(e,t,n){"use strict";var i=n("dfa2"),s=n.n(i);s.a},"7c69":function(e,t,n){"use strict";var i=n("0682"),s=n.n(i);s.a},8030:function(e,t,n){},8677:function(e,t,n){},"88ec":function(e,t,n){},"8a31":function(e,t,n){},"8d7e":function(e,t,n){},9453:function(e,t,n){},a4f4:function(e,t,n){"use strict";var i=n("e29a"),s=n.n(i);s.a},a645:function(e,t,n){},a970:function(e,t,n){"use strict";var i=n("9453"),s=n.n(i);s.a},b0c5:function(e,t,n){"use strict";var i=n("8677"),s=n.n(i);s.a},b19a:function(e,t,n){"use strict";var i=n("8d7e"),s=n.n(i);s.a},b420:function(e,t,n){"use strict";var i=n("4962"),s=n.n(i);s.a},cef3:function(e,t,n){"use strict";var i=n("6911"),s=n.n(i);s.a},d20d:function(e,t,n){"use strict";var i=n("8a31"),s=n.n(i);s.a},d6b8:function(e,t,n){},dfa2:function(e,t,n){},e272:function(e,t,n){},e29a:function(e,t,n){},f0d6:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{viewBox:"0 0 18 15",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"m1.6 8 4.3 4.2 10.5-10.4",fill:"none","stroke-width":"3"}})])},s=[],r=n("2877"),o={},a=Object(r["a"])(o,i,s,!1,null,null,null);t["a"]=a.exports},f146:function(e,t,n){"use strict";var i=n("d6b8"),s=n.n(i);s.a},fc08:function(e,t,n){"use strict";var i=n("24d2"),s=n.n(i);s.a}});
//# sourceMappingURL=catalogs.cc788394.js.map